# Skillテンプレート集

このファイルには、様々なタイプのSkillのテンプレートが含まれています。

## 目次

- シンプルなSkillテンプレート（コードなし）
- コード/スクリプト付きSkillテンプレート
- ワークフロー重視Skillテンプレート
- ドメイン別整理Skillテンプレート
- データ分析Skillテンプレート

---

## 1. シンプルなSkillテンプレート（コードなし）

分析、レビュー、文書作成などのタスクに適しています。

````markdown
---
name: task-name-here
description: このSkillは[具体的な機能]を実行。[トリガーキーワード]に言及された時に使用。
---

# [Skill名]

## 概要

[このSkillが何をするかの簡潔な説明（1-2文）]

## 使用タイミング

このSkillは以下の場合に使用:
- [シナリオ1]
- [シナリオ2]
- [シナリオ3]

## 基本的な使い方

[最も一般的な使用方法の簡潔な説明]

### 例

**入力**: [例示的な入力]

**出力**:
```
[期待される出力の例]
```

## ガイドライン

### 必須要件
- [必ず従うべきルール1]
- [必ず従うべきルール2]

### 推奨事項
- [推奨されるベストプラクティス1]
- [推奨されるベストプラクティス2]

### 避けるべきこと
- [避けるべきアンチパターン1]
- [避けるべきアンチパターン2]

## 出力フォーマット

[必要に応じて]期待される出力形式のテンプレート:

```
[テンプレート構造]
```

## 参照

詳細情報: [REFERENCE.md](REFERENCE.md)
````

---

## 2. コード/スクリプト付きSkillテンプレート

PDF処理、データ変換、API操作などに適しています。

````markdown
---
name: processing-task-name
description: [処理内容]を実行。[ファイルタイプ、操作タイプ]に言及された時に使用。
---

# [Processing Skill名]

## クイックスタート

基本的な処理:

```python
import library

# 簡潔なコード例
result = library.process(input_file)
```

## 主要機能

**基本処理**: [説明]
**高度な処理**: 詳細は [ADVANCED.md](ADVANCED.md) を参照
**APIリファレンス**: 全メソッドは [API_REFERENCE.md](API_REFERENCE.md) を参照

## 処理ワークフロー

チェックリストをコピーして進捗追跡:

```
処理進捗:
- [ ] ステップ1: 入力を検証
- [ ] ステップ2: データを処理
- [ ] ステップ3: 出力を検証
- [ ] ステップ4: 結果を保存
```

### ステップ1: 入力を検証

検証スクリプトを実行:

```bash
python scripts/validate_input.py input_file
```

### ステップ2: データを処理

メイン処理を実行:

```python
# 処理コード
```

### ステップ3: 出力を検証

**重要**: 必ず検証してから次に進む

```bash
python scripts/validate_output.py output_file
```

検証失敗時はステップ2に戻る。

### ステップ4: 結果を保存

検証成功後、結果を保存:

```bash
python scripts/save_results.py output_file final_location
```

## 必要なパッケージ

```bash
pip install library-name==version
pip install another-library
```

## トラブルシューティング

**エラー: [一般的なエラー1]**
解決方法: [解決策]

**エラー: [一般的なエラー2]**
解決方法: [解決策]

## ユーティリティスクリプト

**validate_input.py**: 入力ファイルの形式を検証

```bash
python scripts/validate_input.py <input_file>
```

**process_batch.py**: 複数ファイルを一括処理

```bash
python scripts/process_batch.py <input_directory> <output_directory>
```
````

---

## 3. ワークフロー重視Skillテンプレート

複雑な多段階プロセスに適しています。

````markdown
---
name: workflow-task-name
description: [ワークフローの目的]を実行する多段階プロセス。[トリガーワード]に言及された時に使用。
---

# [Workflow Skill名]

## ワークフロー概要

このSkillは以下のステップで[目的]を達成:

1. [フェーズ1の簡潔な説明]
2. [フェーズ2の簡潔な説明]
3. [フェーズ3の簡潔な説明]

## 完全なワークフロー

このチェックリストをコピーして進捗を追跡:

```
ワークフロー進捗:
- [ ] フェーズ1: [フェーズ名]
  - [ ] 1.1: [サブステップ]
  - [ ] 1.2: [サブステップ]
- [ ] フェーズ2: [フェーズ名]
  - [ ] 2.1: [サブステップ]
  - [ ] 2.2: [サブステップ]
- [ ] フェーズ3: [フェーズ名]
  - [ ] 3.1: [サブステップ]
  - [ ] 3.2: [サブステップ]
- [ ] 検証: すべての要件を満たしているか確認
```

### フェーズ1: [フェーズ名]

**目的**: [このフェーズの目的]

**実行内容**:

1.1. [ステップ1の詳細]
   - [具体的なアクション]
   - [期待される結果]

1.2. [ステップ2の詳細]
   - [具体的なアクション]
   - [期待される結果]

**検証**: このフェーズ完了前に確認:
- [ ] [検証項目1]
- [ ] [検証項目2]

### フェーズ2: [フェーズ名]

**目的**: [このフェーズの目的]

**前提条件**: フェーズ1が完了し検証済み

**実行内容**:

2.1. [ステップ1の詳細]

2.2. [ステップ2の詳細]

**フィードバックループ**: 問題が見つかった場合:
1. 問題の詳細を記録
2. フェーズ1の該当ステップに戻る
3. 修正後、フェーズ2を再実行

### フェーズ3: [フェーズ名]

**目的**: [このフェーズの目的]

**前提条件**: フェーズ2が完了し検証済み

**実行内容**:

3.1. [最終ステップ1]

3.2. [最終ステップ2]

### 最終検証

すべてのフェーズ完了後:

- [ ] [全体的な検証項目1]
- [ ] [全体的な検証項目2]
- [ ] [全体的な検証項目3]

すべての検証項目を満たした場合のみ完了とする。

## 条件分岐

タスクタイプに応じて適切なワークフローを選択:

**タイプA の場合** → フェーズ1 → フェーズ2A → フェーズ3
**タイプB の場合** → フェーズ1 → フェーズ2B → フェーズ3

### フェーズ2A: [A用の処理]
[詳細]

### フェーズ2B: [B用の処理]
[詳細]
````

---

## 4. ドメイン別整理Skillテンプレート

データ分析、複数のドメイン/スキーマを扱う場合に適しています。

````markdown
---
name: multi-domain-analysis
description: [複数ドメイン]のデータ分析。[ドメイン名A、ドメイン名B、ドメイン名C]に言及された時に使用。
---

# [Multi-Domain Skill名]

## 利用可能なドメイン

**ドメインA**: [A の説明] → [reference/domain-a.md](reference/domain-a.md) を参照
**ドメインB**: [B の説明] → [reference/domain-b.md](reference/domain-b.md) を参照
**ドメインC**: [C の説明] → [reference/domain-c.md](reference/domain-c.md) を参照

## クイック検索

特定の[エンティティ/メトリック]を見つける:

```bash
grep -i "検索キーワード" reference/domain-a.md
grep -i "検索キーワード" reference/domain-b.md
```

## 共通パターン

### 基本的なクエリパターン

```sql
-- または適切なクエリ言語
SELECT [フィールド]
FROM [テーブル]
WHERE [条件]
```

### フィルタリングルール

**重要**: 常に以下のルールを適用:
- [ルール1: 例: テストアカウントを除外]
- [ルール2: 例: 特定期間に限定]

## ドメイン横断分析

複数ドメインのデータを結合する場合:

1. 各ドメインのリファレンスを確認
2. 共通キー/識別子を特定
3. 結合条件を確認

詳細: [CROSS_DOMAIN.md](CROSS_DOMAIN.md)

## ディレクトリ構造

```
skill-directory/
├── SKILL.md (このファイル)
└── reference/
    ├── domain-a.md (ドメインA詳細)
    ├── domain-b.md (ドメインB詳細)
    └── domain-c.md (ドメインC詳細)
```
````

**reference/domain-a.md の例**:

```markdown
# ドメインA リファレンス

## 目次
- テーブル/エンティティ一覧
- フィールド定義
- 一般的なクエリパターン
- 注意事項

## テーブル一覧

### テーブル1: `table_name_1`

**説明**: [テーブルの目的]

**主要フィールド**:
- `field_1`: [説明、型]
- `field_2`: [説明、型]
- `field_3`: [説明、型]

**一般的な用途**:
- [用途1]
- [用途2]

### テーブル2: `table_name_2`

[同様の構造]

## 共通クエリ

### [クエリ目的1]

```sql
SELECT field_1, field_2
FROM table_name_1
WHERE condition
```

### [クエリ目的2]

```sql
[クエリ例]
```

## 注意事項

- [ドメイン固有の注意点1]
- [ドメイン固有の注意点2]
```

---

## 5. データ分析Skillテンプレート

SQL、データベース、分析タスクに適しています。

````markdown
---
name: data-analysis-task
description: [データソース]のデータ分析と[出力タイプ]生成。[データソース名、分析タイプ]に言及された時に使用。
---

# [Data Analysis Skill名]

## データソース

利用可能なデータ:
- **[ソース1]**: [説明] → [schemas/source1.md](schemas/source1.md)
- **[ソース2]**: [説明] → [schemas/source2.md](schemas/source2.md)

## 基本的な分析ワークフロー

```
分析進捗:
- [ ] 1. 要件を明確化
- [ ] 2. 適切なデータソースを特定
- [ ] 3. スキーマを確認
- [ ] 4. クエリを作成
- [ ] 5. 結果を検証
- [ ] 6. 分析をフォーマット
```

### 1. 要件を明確化

以下を確認:
- 分析期間は?
- 含めるべきセグメントは?
- 除外すべきデータは?
- 出力形式は?

### 2. 適切なデータソースを特定

[要件に基づいてどのソースを使うべきかのガイド]

### 3. スキーマを確認

該当するスキーマドキュメントを読む:
- フィールド名と型
- テーブル間の関係
- インデックスと制約

### 4. クエリを作成

**必須フィルタ** (常に適用):
```sql
WHERE is_test = FALSE
  AND created_at >= '[開始日]'
  AND created_at < '[終了日]'
```

**集計の例**:
```sql
SELECT
  dimension,
  COUNT(*) as count,
  SUM(metric) as total
FROM table_name
WHERE [必須フィルタ]
GROUP BY dimension
ORDER BY total DESC
```

### 5. 結果を検証

実行後に確認:
- [ ] 行数は期待範囲内か?
- [ ] NULLや異常値はないか?
- [ ] 合計は妥当か?

### 6. 分析をフォーマット

結果を以下の形式で提示:

```markdown
# [分析タイトル]

## サマリー
- 期間: [開始日] - [終了日]
- 総レコード数: [数値]
- 主要な発見: [1-2文]

## 主要メトリック

| メトリック | 値 | 変化 |
|-----------|-----|------|
| [メトリック1] | [値] | [±%] |
| [メトリック2] | [値] | [±%] |

## 詳細分析

[詳細な発見と洞察]

## 推奨事項

1. [推奨事項1]
2. [推奨事項2]
```

## よく使うクエリパターン

### [パターン1名]

```sql
[よく使うクエリ1]
```

用途: [このクエリが解決する問題]

### [パターン2名]

```sql
[よく使うクエリ2]
```

用途: [このクエリが解決する問題]

## トラブルシューティング

**問題: クエリが遅い**
- インデックス付きフィールドでフィルタ
- 不要なJOINを削除
- 日付範囲を制限

**問題: 予期しない結果**
- テストデータが含まれていないか確認
- NULLの扱いを確認
- 重複排除が必要か確認
````

---

## テンプレートの使い方

1. **適切なテンプレートを選択**: タスクの性質に最も近いテンプレートを選ぶ
2. **プレースホルダーを置換**: `[...]` で囲まれた部分を具体的な内容に置き換え
3. **不要なセクションを削除**: 使わないセクションは削除して簡潔に保つ
4. **具体例を追加**: 抽象的な説明より具体例を優先
5. **反復改善**: 実際の使用を通じてテンプレートを改善

## テンプレートのカスタマイズ

- **セクションの追加**: 必要に応じて新しいセクションを追加（500行以内を維持）
- **セクションの並び替え**: 最も重要な情報を上部に配置
- **スタイルの調整**: プロジェクトやチームの好みに合わせて調整
- **参照ファイルの分割**: 500行を超える場合は段階的情報開示パターンを適用
